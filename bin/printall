#!/bin/bash

#md_array=(`find . -mindepth 1 -maxdepth 1 -name '*.md'`)
#md_array=(`ls *.md`)

if [ -z "`which pandoc 2>/dev/null`" ]; then
  echo "Error: pandoc is not installed" >&2
  exit 1
fi

old_IFS=$IFS
IFS=' '

count=0
for k in *.md; do
  let count++
done

echo "$count files to be converted"
returner=0

for k in *.md; do
  md_name="$k"
  pdf_name="${k%.md}.pdf"
  echo "Converting $md_name to $pdf_name"
  pandoc "$md_name" -o "$pdf_name" || returner=$?
done

IFS=$old_IFS

exit $returner
